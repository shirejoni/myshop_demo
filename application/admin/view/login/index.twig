<!doctype html>
<html class="no-js" lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Dashboard | {{ PageTitle }}</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- favicon
		============================================ -->
    <link rel="shortcut icon" type="image/x-icon" href="{{ URL }}assets/admin/img/favicon.ico">
    <!-- Bootstrap CSS
		============================================ -->
    <link rel="stylesheet" href="{{ URL }}assets/admin/css/bootstrap.min.css">
    <!-- Bootstrap CSS
		============================================ -->
    <link rel="stylesheet" href="{{ URL }}assets/admin/css/font-awesome.min.css">
    <!-- owl.carousel CSS
		============================================ -->
    <link rel="stylesheet" href="{{ URL }}assets/admin/css/owl.carousel.css">
    <link rel="stylesheet" href="{{ URL }}assets/admin/css/owl.theme.css">
    <link rel="stylesheet" href="{{ URL }}assets/admin/css/owl.transitions.css">
    <!-- animate CSS
		============================================ -->
    <link rel="stylesheet" href="{{ URL }}assets/admin/css/animate.css">
    <!-- normalize CSS
		============================================ -->
    <link rel="stylesheet" href="{{ URL }}assets/admin/css/normalize.css">
    <!-- main CSS
		============================================ -->
    <link rel="stylesheet" href="{{ URL }}assets/admin/css/main.css">
    <!-- morrisjs CSS
		============================================ -->
    <link rel="stylesheet" href="{{ URL }}assets/admin/css/morrisjs/morris.css">
    <!-- mCustomScrollbar CSS
		============================================ -->
    <link rel="stylesheet" href="{{ URL }}assets/admin/css/scrollbar/jquery.mCustomScrollbar.min.css">
    <!-- metisMenu CSS
		============================================ -->
    <link rel="stylesheet" href="{{ URL }}assets/admin/css/metisMenu/metisMenu.min.css">
    <link rel="stylesheet" href="{{ URL }}assets/admin/css/metisMenu/metisMenu-vertical.css">
    <!-- calendar CSS
		============================================ -->
    <link rel="stylesheet" href="{{ URL }}assets/admin/css/calendar/fullcalendar.min.css">
    <link rel="stylesheet" href="{{ URL }}assets/admin/css/calendar/fullcalendar.print.min.css">
    <!-- forms CSS
		============================================ -->
    <link rel="stylesheet" href="{{ URL }}assets/admin/css/form/all-type-forms.css">
    <!-- style CSS
		============================================ -->
    <link rel="stylesheet" href="{{ URL }}assets/admin/style.css">
    <!-- responsive CSS
		============================================ -->
    <link rel="stylesheet" href="{{ URL }}assets/admin/css/responsive.css">
    <!-- modernizr JS
		============================================ -->
    <script src="{{ URL }}assets/admin/js/vendor/modernizr-2.8.3.min.js"></script>
</head>

<body>
<!--[if lt IE 8]>
<p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
<![endif]-->
<div class="error-pagewrap">
    <div class="error-page-int">
        <div class="text-center m-b-md custom-login">
            <h3>PLEASE LOGIN TO APP</h3>
            <p>This is the best app ever!</p>
        </div>
        <div class="content-error">

            <div class="hpanel">
                <div class="panel-body">
                        {% include "login/login_message.twig" %}
                        <div class="form-group">
                            <label class="control-label" for="username">Username</label>
                            <input type="text" placeholder="example@gmail.com" title="Please enter you username" required="" value="" name="username" id="username" class="form-control">
                            <span class="help-block small">Your unique username to app</span>
                        </div>
                        <div class="form-group">
                            <label class="control-label" for="password">Password</label>
                            <input type="password" title="Please enter your password" placeholder="******" required="" value="" name="password" id="password" class="form-control">
                            <span class="help-block small">Yur strong password</span>
                        </div>
                        <div class="checkbox login-checkbox">
                            <label>
                                <input type="checkbox" class="i-checks"> Remember me </label>
                            <p class="help-block small">(if this is a private computer)</p>
                        </div>
                        <button class="btn btn-success btn-block loginbtn" id="btn-login">Login</button>

                </div>
            </div>
        </div>
        <div class="text-center login-footer">
            <p>Copyright Â© 2018. All rights reserved. Template by <a href="https://colorlib.com/wp/templates/">Colorlib</a></p>
        </div>
    </div>
</div>
<!-- jquery
    ============================================ -->
<script src="{{ URL }}assets/admin/js/vendor/jquery-1.12.4.min.js"></script>
<!-- bootstrap JS
    ============================================ -->
<script src="{{ URL }}assets/admin/js/bootstrap.min.js"></script>
<!-- wow JS
    ============================================ -->
<script src="{{ URL }}assets/admin/js/wow.min.js"></script>
<!-- price-slider JS
    ============================================ -->
<script src="{{ URL }}assets/admin/js/jquery-price-slider.js"></script>
<!-- meanmenu JS
    ============================================ -->
<script src="{{ URL }}assets/admin/js/jquery.meanmenu.js"></script>
<!-- owl.carousel JS
    ============================================ -->
<script src="{{ URL }}assets/admin/js/owl.carousel.min.js"></script>
<!-- sticky JS
    ============================================ -->
<script src="{{ URL }}assets/admin/js/jquery.sticky.js"></script>
<!-- scrollUp JS
    ============================================ -->
<script src="{{ URL }}assets/admin/js/jquery.scrollUp.min.js"></script>
<!-- mCustomScrollbar JS
    ============================================ -->
<script src="{{ URL }}assets/admin/js/scrollbar/jquery.mCustomScrollbar.concat.min.js"></script>
<script src="{{ URL }}assets/admin/js/scrollbar/mCustomScrollbar-active.js"></script>
<!-- metisMenu JS
    ============================================ -->
<script src="{{ URL }}assets/admin/js/metisMenu/metisMenu.min.js"></script>
<script src="{{ URL }}assets/admin/js/metisMenu/metisMenu-active.js"></script>
<!-- tab JS
    ============================================ -->
<script src="{{ URL }}assets/admin/js/tab.js"></script>
<!-- icheck JS
    ============================================ -->
<script src="{{ URL }}assets/admin/js/icheck/icheck.min.js"></script>
<script src="{{ URL }}assets/admin/js/icheck/icheck-active.js"></script>
<!-- plugins JS
    ============================================ -->
<script src="{{ URL }}assets/admin/js/plugins.js"></script>
<!-- main JS
    ============================================ -->
<script src="{{ URL }}assets/admin/js/main.js"></script>
<script type="text/javascript">
    {% autoescape false %}
        let url = "{{ CURRENT_URL }}";
        let successMessageBoxElement = $(".success-message-box").first();
        let errorMessageBoxElement = $(".error-message-box").first();
        $(document).ready(function () {
            $('#btn-login').click(function (e) {
                let data = {};
                let messages = [];
                let error = false;
                let element = $("#username");

                errorMessageBoxElement.text('');
                successMessageBoxElement.text('');
                errorMessageBoxElement.parent().css("display", "none");
                successMessageBoxElement.parent().css("display", "none");

                if(element.val() != "") {
                    data['username'] = element.val();
                }else {
                    error = true;
                    messages.push("{{ Translate['error_email_invalid'] }}");
                }
                element = $("#password");
                if(element.val() != "") {
                    data['password'] = element.val();
                }else {
                    error = true;
                    messages.push("{{ Translate['error_password_invalid'] }}");
                }
                if(!error) {
                    $.post(url, data, function (response) {
                        response = JSON.parse(response);
                        if(response.status === 1) {
                            for (let i = 0; i < response['messages'].length; i++) {
                                $('<p>').text(response['messages'][i]).appendTo(successMessageBoxElement);
                            }
                            if(response['messages'].length > 0) {
                                successMessageBoxElement.parent().css({
                                    "display" : "block",
                                    "direction": "rtl",
                                    "text-align": "right"
                                });
                            }
                            if(response['redirect']) {
                                window.setTimeout(function () {
                                    window.location.href = response['redirect'];
                                }, 1000)
                            }
                        }else {
                               for (let i = 0; i < response['messages'].length; i++) {
                                   $('<p>').text(response['messages'][i]).appendTo(errorMessageBoxElement);
                               }
                               if(response['messages'].length > 0) {
                                   errorMessageBoxElement.parent().css({
                                       "display" : "block",
                                       "direction": "rtl",
                                       "text-align": "right"
                                   });
                               }
                        }
                    });
                }else {
                    for (let i = 0; i < messages.length; i++) {
                        $('<p>').text(messages[i]).appendTo(errorMessageBoxElement);
                    }
                    if(messages.length > 0) {
                        errorMessageBoxElement.parent().css({
                            "display" : "block",
                            "direction": "rtl",
                            "text-align": "right"
                        });
                    }
                }

            });
        });
    {% endautoescape %}
</script>

</body>

</html>